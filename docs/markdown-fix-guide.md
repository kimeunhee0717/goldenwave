# 마크다운 특수문자 충돌 해결 가이드

> **작성일:** 2026-02-11  
> **용도:** AI가 생성한 마크다운에서 특수문자와 서식이 충돌할 때 해결하는 방법  
> **적용 범위:** 부자타임 블로그, 시니어 AI 클래스, 기타 모든 마크다운 프로젝트

---

## 📌 왜 이런 문제가 생기나요?

마크다운(Markdown)은 `*`, `_`, `` ` ``, `[`, `]`, `#` 같은 **특수문자를 서식 표시로 사용**합니다.  
문제는 AI가 글을 생성할 때, 이 특수문자들이 **일반 텍스트의 괄호/기호와 섞이면서** 서식이 깨지는 것입니다.

### 쉽게 비유하면:
- 마크다운에서 `**` 는 "여기서부터 굵게!" 라는 신호입니다.
- 그런데 `**`를 열었는데 닫지 않으면? → 그 뒤 글 전체가 굵게 되거나, 아예 서식이 안 먹습니다.
- 마치 **따옴표를 열고 닫지 않은 것**과 같은 원리입니다.

---

## 🔍 자주 발생하는 오류 패턴 7가지

### 패턴 1: `]]` 로 잘못 닫기 ⭐가장 흔함

```
❌ 잘못된 예:
**[예시 2: 요리 레시피 물어보기]]

✅ 올바른 예:
**[예시 2: 요리 레시피]**
```

**원인:** AI가 `**[텍스트]**` 를 쓰려다가 닫는 `**`를 `]`로 혼동  
**결과:** 굵은 글씨(볼드)가 적용되지 않고 `**`가 그대로 보임

---

### 패턴 2: 볼드(`**`) 안 닫기

```
❌ 잘못된 예:
**중요한 안내사항
이것은 중요합니다.

✅ 올바른 예:
**중요한 안내사항**
이것은 중요합니다.
```

**원인:** AI가 줄 끝에서 `**`를 빼먹음  
**결과:** 그 줄부터 다음 `**`가 나올 때까지 전부 깨짐

---

### 패턴 3: `*` 하나로 닫기 (볼드 ≠ 기울임)

```
❌ 잘못된 예:
**[핵심 포인트]*

✅ 올바른 예:
**[핵심 포인트]**
```

**원인:** `**`(볼드)를 `*`(기울임) 하나로 닫음  
**결과:** 볼드 대신 기울임체가 되거나 서식 깨짐

---

### 패턴 4: 백틱(`` ` ``) 개수 불일치

```
❌ 잘못된 예:
``gemini.google.com`    (2개로 열고 1개로 닫음)
`gemini.google.com``    (1개로 열고 2개로 닫음)

✅ 올바른 예:
`gemini.google.com`     (1개로 열고 1개로 닫음)
```

**원인:** AI가 코드 표시용 백틱 개수를 잘못 맞춤  
**결과:** 코드 박스가 안 만들어지거나 백틱이 텍스트로 보임

---

### 패턴 5: 대괄호 `[]`와 소괄호 `()` 링크 깨짐

```
❌ 잘못된 예:
[구글 제미나이(https://gemini.google.com)   ← ] 빠짐
[구글 제미나이](https://gemini.google.com    ← ) 빠짐

✅ 올바른 예:
[구글 제미나이](https://gemini.google.com)
```

**원인:** AI가 링크 서식에서 괄호를 빠뜨림  
**결과:** 링크가 만들어지지 않고 텍스트로 표시됨

---

### 패턴 6: 제목 `#` 뒤에 공백 없음

```
❌ 잘못된 예:
##제목입니다       ← # 바로 뒤에 글자
###세번째 제목     ← 공백 없음

✅ 올바른 예:
## 제목입니다      ← # 뒤에 공백 1개
### 세번째 제목
```

**원인:** 마크다운은 `#` 뒤에 반드시 공백이 있어야 제목으로 인식  
**결과:** 제목이 안 되고 `##제목입니다` 그대로 표시

---

### 패턴 7: 목록 `-` 뒤에 공백 없음

```
❌ 잘못된 예:
-항목1
-항목2

✅ 올바른 예:
- 항목1
- 항목2
```

**원인:** `-` 바로 뒤에 글자가 오면 목록이 아닌 일반 텍스트로 인식  
**결과:** 동그라미(●) 목록이 안 만들어짐

---

## 🛠️ 해결 방법

### 방법 1: 자동 수정 스크립트 사용 (추천! ⭐)

프로젝트 루트에 `fix_markdown.py` 스크립트를 넣고 실행하면 됩니다.

```bash
# 1. 어떤 오류가 있는지 확인만 (파일 안 바꿈)
python fix_markdown.py ./폴더경로

# 2. 실제로 수정하기
python fix_markdown.py ./폴더경로 --fix
```

**스크립트 위치:** `C:\NewProject\bujatime\goldenwave\tools\fix_markdown.py`

이 스크립트는 위의 7가지 패턴을 **전부 자동으로 감지하고 수정**합니다.

---

### 방법 2: AI 생성 시 사전 교정

블로그 자동 포스팅 스크립트(`generate_blog_post.py`)에는 이미 `fix_markdown()` 함수가 내장되어 있습니다.
AI가 글을 생성하면 **저장 전에 자동으로 교정**합니다.

다른 프로젝트에서 AI로 마크다운을 생성할 때도 같은 방식으로 적용하면 됩니다:

```python
from tools.fix_markdown import fix_markdown_text

# AI가 생성한 텍스트
raw_text = ai_generate(prompt)

# 자동 교정 후 저장
fixed_text = fix_markdown_text(raw_text)
save_to_file(fixed_text)
```

---

### 방법 3: 수동으로 확인할 때 체크리스트

글을 직접 확인할 때 아래 항목만 체크하면 됩니다:

- [ ] `**` 로 시작한 곳에 `**` 로 끝나는지? (볼드)
- [ ] `` ` `` 로 시작한 곳에 `` ` `` 로 끝나는지? (코드)
- [ ] `[텍스트](URL)` 형식이 제대로 닫혔는지? (링크)
- [ ] `#`, `##` 뒤에 공백이 있는지? (제목)
- [ ] `-` 뒤에 공백이 있는지? (목록)

---

## 📂 다른 프로젝트에 적용하는 방법

### Step 1: 스크립트 복사
```
tools/fix_markdown.py → 다른 프로젝트의 tools/ 폴더에 복사
```

### Step 2: 실행
```bash
# 해당 프로젝트의 마크다운 폴더 지정
python tools/fix_markdown.py ./src/content --fix
```

### Step 3: (선택) CI/CD에 추가
GitHub Actions나 배포 전 단계에 추가하면 **배포 전 자동 검사**도 가능합니다:
```yaml
- name: Fix markdown
  run: python tools/fix_markdown.py ./src/data/posts --fix
```

---

## 🔑 핵심 기억 사항

| 특수문자 | 마크다운 용도 | 주의점 |
|----------|-------------|--------|
| `**텍스트**` | **굵은 글씨** | 반드시 양쪽에 `**` 2개씩 |
| `*텍스트*` | *기울임체* | `**`와 헷갈리지 않게 |
| `` `텍스트` `` | `코드 표시` | 양쪽 백틱 개수 동일하게 |
| `[텍스트](URL)` | 링크 | `[]`와 `()` 모두 닫기 |
| `# 제목` | 제목 | `#` 뒤에 **공백 필수** |
| `- 항목` | 목록 | `-` 뒤에 **공백 필수** |
| `> 인용` | 인용문 | `>` 뒤에 **공백 필수** |

---

*이 문서는 부자타임 블로그뿐 아니라 마크다운을 사용하는 모든 프로젝트에 적용됩니다.*
