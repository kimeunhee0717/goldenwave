# 한국장기 (Janggi) 개발 문서

## 📋 개요
- **게임명**: 한국장기
- **파일 위치**: `src/pages/tools/JanggiGame.tsx`
- **URL**: `/tools/janggi`

---

## 🎯 보드 구조

### 격자 크기
- **가로**: 9줄 (0-8)
- **세로**: 10줄 (0-9)
- **총 교차점**: 9×10 = 90개

### 궁성 (Palace)
- **초 궁성**: 0-2행, 3-5열 (3×3)
- **한 궁성**: 7-9행, 3-5열 (3×3)
- **대각선**: 궁성 난간 연결

---

## ⚔️ 기물 정보

### 기물 종류 및 점수
| 기물 | 한자 | 점수 | 개수 | 분류 |
|------|------|------|------|------|
| **궁** | 楚/漢 | - | 1 | 왕 |
| **차** | 車 | 13점 | 2 | 대기물 |
| **포** | 包 | 7점 | 2 | 대기물 |
| **마** | 馬 | 5점 | 2 | 대기물 |
| **상** | 象 | 3점 | 2 | 대기물 |
| **사** | 士 | 3점 | 2 | 소기물 |
| **졸/병** | 卒/兵 | 2점 | 5 | 소기물 |

**총점**: 72점 (후수 1.5점 덤 → 73.5점)

---

## 🎮 이동 규칙

### 1. 차 (車, Chariot) - 13점
- **이동**: 상하좌우 직선, 무제한
- **특징**: 가장 강력한 기물
- **장애물**: 있으면 멈춤

```
  │ │ │
──┼─┼─┼──
  │ 차 │
──┼─┼─┼──
  │ │ │
```

### 2. 포 (包, Cannon) - 7점
- **이동**: 직선
- **조건**: 반드시 1개의 기물을 넘어야 함
- **제한**: 
  - 포로 포 잡기 불가
  - 넘지 않고 이동 불가

```
[기물] → 포 → [목표]
     (넘기)
```

### 3. 마 (馬, Horse) - 5점
- **이동**: 日자 (2칸+1칸 꺾임)
- **장애물**: 먼저 2칸 가는데 장애물 있으면 못 감

```
  ↗   ↖
  │   │
──┼───┼──
  │ 마 │
──┼───┼──
  │   │
  ↘   ↙
```

### 4. 상 (象, Elephant) - 3점
- **이동**: 田자 (2×2 대각선)
- **장애물**: 중앙(田의 중심)에 장애물 있으면 못 감
- **제한**: 궁성进입/통과 불가

```
  ↗     ↖
   \   /
    \ /
     상
    / \
   /   \
  ↘     ↙
```

### 5. 사 (士, Guard) - 3점
- **이동**: 대각선 1칸
- **제한**: 궁성 내에서만 이동

```
  ↖ ↗
  사
  ↙ ↘
```

### 6. 궁 (楚/漢, King) - 왕
- **초기 위치**: 궁성 가운데 (초: 1행 4열, 한: 8행 4열)
- **이동**: 궁성 내 선을 따라 1칸 (가운데에서는 8방향, 변/꼭짓점에서는 선이 있는 방향만)
- **제한**: 궁성 내에서만
- **특수**: 왕대왕 (같은 열에 왕이 있고 사이 장애물 없으면 잡을 수 있음)

```
  ↖ ↑ ↗
  ← 궁 →
  ↙ ↓ ↘
```

### 7. 졸/병 (卒/兵, Soldier) - 2점
- **이동**: 
  - **앞**: 1칸 (진격 방향)
  - **좌우**: 1칸
- **제한**: 뒤로 못 감

```
    ↑
  ← 병 →
```

---

## 🏆 승패 규칙

### 승리 조건
1. **상대 궁을 잡음**
2. **장군 상태에서 상대가 벗어나지 못함** (체크메이트)

### 특수 규칙
- **장군**: 궁이 공격받는 상태
- **외통수**: 이동할 수 없는 상태
- **무승부**: 
  - 3수 반복
  - 기물 부족으로 승부 불가
  - 점수제 적용 (남은 기물 합산)

---

## 📐 초기 배치 (원앙마 포진)

### 초나라 (위쪽)
```
행 0: [車][馬][象][士][  ][士][象][馬][車]
행 1:             [楚]             
행 2:    [包]                   [包]
행 3: [卒]   [卒]   [卒]   [卒]   [卒]
```

### 한나라 (아래쪽)
```
행 6: [兵]   [兵]   [兵]   [兵]   [兵]
행 7:    [包]                   [包]
행 8:             [漢]             
행 9: [車][馬][象][士][  ][士][象][馬][車]
```

**참고**: 궁(楚/漢)은 궁성 중심에 위치 (초: 1행, 한: 8행)

---

## 🎨 디자인 가이드

### 색상
- **초(藍)**: 파란색 계열 (#1d4ed8)
- **한(赤)**: 빨간색 계열 (#dc2626)
- **보드**: 나무 색상 (그라데이션 #f5e6c8 → #d4b896)
- **격자선**: 갈색 (#5c3d1e)

### 기물 모양
- **팔각형** (octagon)
- **크기**: 반지름 21px
- **그림자**: drop-shadow 적용

### UI 요소
- **선택 표시**: 노란색 링
- **이동 가능**: 노란색 점 / 빨간색 링(잡기)
- **마지막 수**: 파란색 원
- **장군**: 빨간색 "장군!" 알림

---

## 🤖 AI 난이도

| 레벨 | 탐색 깊이 | 특징 |
|------|-----------|------|
| **초급** | 2 | 30% 랜덤성, 실수 허용 |
| **중급** | 3 | 15% 랜덤성, 기본 전략 |
| **고급** | 4 | Alpha-Beta Pruning |
| **마스터** | 5 | 최적화된 평가 함수 |

---

## 📝 수 기록 표기법

### 좌표 표기
- **열**: a-i (왼→오)
- **행**: 1-10 (아래→위)
- **예시**: `a1` (좌하단), `e5` (중앙)

### 표기 예시
- `車 a1→a5`: 차가 a1에서 a5로 이동
- `包 a1×e5`: 포가 a1에서 e5로 기물 잡음

---

## 🔧 기능 목록

### 구현된 기능
- ✅ 모든 기물 이동 규칙
- ✅ 장군/체크메이트 체크
- ✅ 왕대왕 규칙
- ✅ AI 대전 (4단계)
- ✅ 위아래 보드 전환
- ✅ 수 기록
- ✅ 기물 잡기 카운트
- ✅ 새 게임/무르기

### 예정된 기능
- ⏳ 시간 제한
- ⏳ 저장/불러오기
- ⏳ 오프닝 라이브러리
- ⏳ 소리 효과

---

## 📚 참고 자료

- 나무위키 - 장기/기물 및 행마법
- 위키백과 - 한국장기
- 대한장기연맹 공식 규칙

---

**작성일**: 2026-02-07  
**버전**: v3.0
